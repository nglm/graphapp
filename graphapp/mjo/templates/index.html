{% extends "base.html" %}

{% load static %}

{% block content %}

    <!-- buttons -->
    <script type="module">
        import {clearSelection, selectOption, updateSliderValue} from "{% static './interact.js' %}";
        import {redraw_relevant_graph} from "{% static './plots.js' %}";
        import {add_legend} from "{% static './figures.js' %}"
        globalThis.clearSelection = clearSelection;
        globalThis.selectOption = selectOption;
        globalThis.updateSliderValue = updateSliderValue;
        globalThis.redraw_relevant_graph = redraw_relevant_graph;
        globalThis.add_legend = add_legend;
    </script>

    {% with "files" as option_name %}
    {% with filenames as options %}
    {% with filename as option %}
    {% include "select.html" %}
    {% endwith %}
    {% endwith %}
    {% endwith %}

    {% with "methods" as option_name %}
    {% with methods as options %}
    {% with method as option %}
    {% include "select.html" %}
    {% endwith %}
    {% endwith %}
    {% endwith %}

    {% with "scores" as option_name %}
    {% with scores as options %}
    {% with score as option %}
    {% include "select.html" %}
    {% endwith %}
    {% endwith %}
    {% endwith %}

    <div class="slider-container" >
        <div id="time_window" class="slider-value"> 1 </div>
        <input
            id="windows" type="range" class="slider-range"
            onchange="selectOption()" oninput="updateSliderValue('windows', 'time_window')"
            step="1" value="1" min="1" max="50"
        >
    </div>

    <div id="all-plots">
        {% include "plots.html" %}
    </div>

    <div id="legend" class="legend side-bar-right " style="top:20px">
        Legend <br>
        number of clusters:
        <script type="module">
            add_legend();
        </script>
    </div>

    <div class="button side-bar-right" onclick="clearSelection()" style="top:180px">Clear selection</div>
    <div class="button side-bar-right" onclick="redraw_relevant_graph()" style="top:250px">Default k values</div>
    <div class="slider-container side-bar-right" style="top:350px">
        <div id="member_selected" class="slider-value"> 1 </div>
        <input
            id="members" type="range" class="slider-range vertical-slider"
            oninput="updateSliderValue('members', 'member_selected')"
            step="1" value="1" min="1" max="50"
        >
    </div>




{% endblock content %}