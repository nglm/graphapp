{% extends "base.html" %}

{% load static %}

{% block content %}

    <!-- buttons -->
    <script type="module">
        import {
            clearSelection, selectOption, updateSliderValue, sliderMember,
        } from "{% static './interact.js' %}";
        import {redraw_relevant_graph} from "{% static './plots.js' %}";
        import {add_legend} from "{% static './figures.js' %}"
        globalThis.clearSelection = clearSelection;
        globalThis.selectOption = selectOption;
        globalThis.updateSliderValue = updateSliderValue;
        globalThis.sliderMember = sliderMember;
        globalThis.redraw_relevant_graph = redraw_relevant_graph;
        globalThis.add_legend = add_legend;
    </script>

    <div class="top-bar">
        {% with "File" as option_title %}
        {% with "files" as option_name %}
        {% with filenames as options %}
        {% with filename as option %}
        {% include "select.html" %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endwith %}

        {% with "Clustering method" as option_title %}
        {% with "methods" as option_name %}
        {% with methods as options %}
        {% with method as option %}
        {% include "select.html" %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endwith %}

        {% with "Clustering score" as option_title %}
        {% with "scores" as option_name %}
        {% with scores as options %}
        {% with score as option %}
        {% include "select.html" %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endwith %}

        {% with "Data representation" as option_title %}
        {% with "data_representation" as option_name %}
        {% with drepresentations as options %}
        {% with drepresentation as option %}
        {% include "select.html" %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endwith %}

        {% with "Time representation" as option_title %}
        {% with "time_representation" as option_name %}
        {% with trepresentations as options %}
        {% with trepresentation as option %}
        {% include "select.html" %}
        {% endwith %}
        {% endwith %}
        {% endwith %}
        {% endwith %}

        <span class="slider-container" >
            <span> Time window: (x6h)</span>
            <span id="time_window" class="slider-value"> 3 </span>
            <input
                id="windows" type="range" class="slider-range"
                onchange="selectOption()" oninput="updateSliderValue('windows', 'time_window')"
                step="1" value="1" min="1" max="50"
            >
        </span>
    </div>



    <div id="all-plots">
        {% include "plots.html" %}
    </div>

    <div id="right-bar" class="right-bar">

        <div id="legend" class="legend right-bar-elem">
            Legend <br>
            number of clusters:
            <script type="module">
                add_legend();
            </script>
            <br>
        </div>

        <div class="slider-container right-bar-elem">
            <fieldset>
                <legend>Type of selection</legend>

                <div>
                    <input type="checkbox" id="intersection" name="intersection" m_ids = "" checked>
                    <label for="intersection">Intersection</label>
                </div>

                <div>
                    <input type="checkbox" id="accumulation" name="accumulation" m_ids = "">
                    <label for="accumulation">Accumulation</label>
                </div>
            </fieldset>
        </div>

        <div class="button-container right-bar-elem">
            <div class="button" onclick="clearSelection()">
                Clear selection
            </div>
        </div>

        <div class="button-container right-bar-elem">
            <div class="button" onclick="redraw_relevant_graph()">
                Default k values
            </div>
        </div>

        <div class="slider-container right-bar-elem">
            <br>
            <span> Selected member: </span>
            <span id="member_selected" class="slider-value slider-value"> 1 </span>
            <input
                id="members_range" type="range" class="slider-range"
                oninput="
                    updateSliderValue('members_range', 'member_selected');
                    sliderMember('lineHovered');
                    "
                onchange="sliderMember('lineClicked');"
                step="1" value="1" min="1" max="50"
            >
            <br>
        </div>
    </div>




{% endblock content %}